syntax = "proto3";

import "google/protobuf/timestamp.proto";

option csharp_namespace = "Clud.Grpc";

service Deployments {
  rpc CreateDeployment (CreateDeploymentRequest) returns (CreateDeploymentResponse);
}

message CreateDeploymentRequest {
  string name = 1;
  string dockerImage = 2;
  bool isPublicDockerImage = 3;
  int32 port = 4;
}

message CreateDeploymentResponse {
}

service Applications {
  rpc ListApplications (ListApplicationsRequest) returns (ListApplicationsResponse);
  rpc GetApplication (GetApplicationRequest) returns (ApplicationResponse);
}

message ListApplicationsRequest {
}

message ListApplicationsResponse {
  message Application {
    string name = 1;
  }

  repeated Application applications = 1;
}

message GetApplicationRequest {
  string name = 1;
}

message ApplicationResponse {
  string name = 1;
  string url = 2;
  repeated ServiceResponse services = 3;

  message ServiceResponse {
    string name = 1;
    string url = 2;
    repeated PodResponse pods = 3;
  }

  message PodResponse {
    string name = 1;
    string status = 2;
    string statusMessage = 3;
    google.protobuf.Timestamp creationDate = 4;
  }
}
